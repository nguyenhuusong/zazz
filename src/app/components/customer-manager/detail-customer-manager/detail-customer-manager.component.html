<div class="main-grid product-detail">
    <section class="bread-crumb">
        <app-hrm-breadcrumb [items]="items" ></app-hrm-breadcrumb>
    </section>
    <div class="content">
        <p-tabView [(activeIndex)]="indexTab" (onChange)="handleChange($event)">
            <p-tabPanel header="Thông tin quản lý">
                <div class="pl-2 pr-2">
                    <app-edit-detail 
                        [optionsButtonsEdit]="optionsButtonsView"   
                        *ngIf="listViews.length> 0" 
                        [detail]="detailInfo" 
                        [manhinh]="'Edit'"  
                        [dataView]="listViews"
                        (callback)="setEmpManager($event)" 
                        (callbackcancel)="cancelUpdate($event)">
                    </app-edit-detail>
                    <app-loading-detail 
                        [id]="'sections-3qnt'" 
                        *ngIf="listViews.length === 0">
                    </app-loading-detail>
                </div>
            </p-tabPanel>
            <p-tabPanel header="Đổi người quản lý">
                <div class="btns-tab">
                    <p-button label="Đổi người quản lý" [styleClass]="'ptBtPoup'"
                (click)="changeManagerInfo()"></p-button>
                </div>
                <div class="pl-2 pr-2">
                    <app-list-grid-angular
                            [rowSelection]="'multiple'"
                            *ngIf="columnDefs.length > 0" 
                            [listsData]="listData" 
                            [height]="heightGrid"
                            [columnDefs]="columnDefs">
                        </app-list-grid-angular>
                        <div class="paginator">
                            <span>Từ {{ countRecord.currentRecordStart }} đến
                                {{ countRecord.currentRecordEnd }}
                                trên tổng số
                                {{ countRecord.totalRecord }} kết quả</span>
                            <p-paginator [rows]="query.pageSize" [totalRecords]="countRecord.totalRecord" [first]="first"
                                (onPageChange)="paginate($event, false)" [rowsPerPageOptions]="[20,40,60,100,200,{ showAll: 'ALL' }]">
                            </p-paginator>
                        </div>
                    <app-loading-grid  
                    *ngIf="columnDefs?.length === 0" 
                    [columnNumber]="11"></app-loading-grid>
                </div>
            </p-tabPanel>
        </p-tabView>
       
    </div>
  
</div>

<p-sidebar
    [style]="{ width: '80%' }"
    [(visible)]="isEditMgChange" 
    (onHide)="closeChangeMa()"
    position="right">
    <ng-template pTemplate="header">
        <!-- #iconheader -->
        Thông tin nhân viên </ng-template>
    <ng-template pTemplate="footer"></ng-template>
    <app-edit-detail 
            [optionsButtonsEdit]="optionsButtonsViewEmChange"   
            *ngIf="listViewsEmMgChange.length> 0" 
            [detail]="detailInfo" 
            [manhinh]="'Edit'"  
            [dataView]="listViewsEmMgChange"
            (callback)="setEmpManagerChange($event)" 
            (callbackcancel)="cancelUpdatChangeMg($event)">
        </app-edit-detail>
        <div class="section-box">
            <app-list-grid-angular 
                (callback)="rowSelected($event)"
                [rowSelection]="'multiple'"
                *ngIf="columnDefsMgChange.length > 0" 
                [listsData]="listData" 
                [height]="heightGridPopup"
                [columnDefs]="columnDefsMgChange">
            </app-list-grid-angular>
            <div class="paginator">
                <span>Từ {{ countRecord.currentRecordStart }} đến
                    {{ countRecord.currentRecordEnd }}
                    trên tổng số
                    {{ countRecord.totalRecord }} kết quả</span>
                <p-paginator [rows]="query.pageSize" [totalRecords]="countRecord.totalRecord" [first]="first"
                    (onPageChange)="paginate($event, true)" [rowsPerPageOptions]="[20,40,60,100,200,{ showAll: 'ALL' }]">
                </p-paginator>
            </div>
        </div>
</p-sidebar>