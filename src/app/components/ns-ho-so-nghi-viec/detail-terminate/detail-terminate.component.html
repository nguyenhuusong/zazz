<div class="main-grid product-detail" *ngIf="!isDialog">
    <section>
        <div class="breadcrumb">
            <p-breadcrumb [model]="itemsMenu"></p-breadcrumb>
            <h3>{{titlePage}}</h3>
        </div>
    </section>
</div>
<section *ngIf="!isDialog">
    <p-tabView [(activeIndex)]="indexTab" (onChange)="handleChange($event.index)">
        <p-tabPanel header="Thông tin chung">
            <app-edit-detail *ngIf="listViews.length> 0" [isNested]="true" [detail]="detailInfo" [manhinh]="'Edit'"
                [optionsButtonsEdit]="optionsButtonsView" [dataView]="listViews" (callback)="setTerminateInfo($event)" (callBackForm)="callBackForm($event)"
                (callbackcancel)="cancel($event)"></app-edit-detail>
                <app-loading-detail 
                            [id]="'app-detail-terminate'" 
                            *ngIf="listViews.length === 0">
                        </app-loading-detail>

                        <div class="col-12  flex justify-content-end align-items-center" >
                            <div class="field-group select " style="margin-bottom: 0;">
                                <p-dropdown 
                                    *ngIf="listViews.length> 0" 
                                    [options]="status" 
                                    (onChange)="UpdateStatus()"
                                    [(ngModel)]="selectedStatus" 
                                    [styleClass]="selectedStatus?.bgColor"  
                                    [style]="{'width': '180px'}" 
                                    optionLabel="name"  
                                    placeholder="Select a Country">
                                    <ng-template pTemplate="selectedItem" >
                                        <div class="flex align-items-center gap-2" *ngIf="selectedStatus" >
                                            <div style="color: #fff">{{ selectedStatus.name}}</div>
                                        </div>
                                    </ng-template>
                                    <ng-template let-country pTemplate="item">
                                        <div class="flex align-items-center gap-2" *ngIf="country.value != selectedStatus.value">
                                            <div class="pb-2 pt-2" style="display: flex; align-items: center; width: 100%;justify-content: space-around;font-size: 13px;">
                                                <span>{{ country.placeholder }} </span>
                                                <span class="pi pi-arrow-right" style="font-size: 12px;"></span>
                                                <span [class]="country.textColor" class="pl-2 pr-2">{{ country.name }}</span>
                                            </div>
                                        </div>
                                    </ng-template>
                                </p-dropdown>
                            </div>
                            <p-splitButton icon="pi pi-send" *ngIf="menuActions.length > 0" styleClass="p-button-sm ml-2" [appendTo]="'body'" (onClick)="callActions(menuActions[0].value)" [label]="menuActions[0].label" [model]="menuActions"></p-splitButton>
                            <p-button label="Đóng" (click)="callback.emit()" styleClass="p-button-secondary p-button-sm ml-2" [style]="{'z-index': 9}" icon="pi pi-directions-alt"></p-button>
                              </div>
        </p-tabPanel>
        <p-tabPanel header="Danh sách hồ sơ">
           <app-ho-so [terminateId]="modelEdit.terminateId" *ngIf="indexTab === 1 && modelEdit.terminateId"></app-ho-so>
        </p-tabPanel>
    </p-tabView>
    <div>
    </div>
</section>

<p-dialog [(visible)]="isEditDetail" [autoZIndex]="true" [modal]="true" (onHide)="callback.emit()"  appendTo="body"
    [style]="{width: '1300px', height: 'auto'}">
    <p-header>
        Hồ sơ nghỉ việc
    </p-header>
    <p-card>
        <app-edit-detail *ngIf="listViews.length> 0" [isNested]="true" [detail]="detailInfo" [manhinh]="'Edit'"
            [optionsButtonsEdit]="optionsButtonsView" [dataView]="listViews" (callback)="setTerminateInfo($event)" (callBackForm)="callBackForm($event)"
            (callbackcancel)="cancel($event)"></app-edit-detail>
    </p-card>

    <ng-template pTemplate="footer" >
        <div class="col-12  flex justify-content-end align-items-center" >
            <div class="field-group select " style="margin-bottom: 0;">
                <p-dropdown 
                    *ngIf="listViews.length> 0" 
                    [options]="status" 
                    (onChange)="UpdateStatus()"
                    [(ngModel)]="selectedStatus" 
                    [styleClass]="selectedStatus?.bgColor"  
                    [style]="{'width': '180px'}" 
                    optionLabel="name"  
                    placeholder="Select a Country">
                    <ng-template pTemplate="selectedItem" >
                        <div class="flex align-items-center gap-2" *ngIf="selectedStatus" >
                            <div style="color: #fff">{{ selectedStatus.name}}</div>
                        </div>
                    </ng-template>
                    <ng-template let-country pTemplate="item">
                        <div class="flex align-items-center gap-2" *ngIf="country.value != selectedStatus.value">
                            <div class="pb-2 pt-2" style="display: flex; align-items: center; width: 100%;justify-content: space-around;font-size: 13px;">
                                <span>{{ country.placeholder }} </span>
                                <span class="pi pi-arrow-right" style="font-size: 12px;"></span>
                                <span [class]="country.textColor" class="pl-2 pr-2">{{ country.name }}</span>
                            </div>
                        </div>
                    </ng-template>
                </p-dropdown>
            </div>
            <p-splitButton icon="pi pi-send" *ngIf="menuActions.length > 0" styleClass="p-button-sm ml-2" [appendTo]="'body'" (onClick)="callActions(menuActions[0].value)" [label]="menuActions[0].label" [model]="menuActions"></p-splitButton>
            <p-button label="Đóng" (click)="callback.emit()" styleClass="p-button-secondary p-button-sm ml-2" [style]="{'z-index': 9}" icon="pi pi-directions-alt"></p-button>
              </div>
    </ng-template>
</p-dialog>

<p-dialog header="Xử lý bàn giao" [(visible)]="displayChangeStatus" [modal]="true" [style]="{width: '1300px'}"
    [draggable]="false" [resizable]="false">
    <app-cap-nhat-trang-thai-nghi-viec [terminateId]="modelPheDuyet.id" (back)="xacnhan()" *ngIf="displayChangeStatus"></app-cap-nhat-trang-thai-nghi-viec>
  
</p-dialog>
