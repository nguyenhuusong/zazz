<div class="wrap-edit-detail">
   <section class="pt-0">
        <div class="btns-tab">
            <p-button styleClass="p-button-sm" icon="pi pi-plus" label="Thêm mới" (click)="addUser()"></p-button>
        </div>
        <app-list-grid-angular 
            [domLayout]="'autoHeight'" 
            *ngIf="columnDefs.length > 0" 
            [idGrid]="gridKey + '_45dfs'"
            [title]="'Chứng chỉ'"
            [listsData]="listsData" 
            (showConfig)="CauHinh()"
            (onCellClicked)="onCellClicked($event)"
            [columnDefs]="columnDefs">
        </app-list-grid-angular>
        <app-loading-grid [columnNumber]="10" *ngIf="columnDefs?.length === 0"  [gridtype]="'hsnv'" [value]="[1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7]"></app-loading-grid>
   </section>
</div>

<p-dialog header="Cài đặt cấu hình " [appendTo]="'body'" [focusTrap]="false" styleClass="popup-setting"
    (onHide)="getSchemeOpenPage()" [(visible)]="displaySetting" [modal]="true" [style]="{width: '50vw'}"
    [maximizable]="true" [draggable]="false" [resizable]="false">
    <app-config-grid-table-form *ngIf="displaySetting && gridKey" [typeConfig]="'TableInfo'"
        [gridKey]="gridKey"></app-config-grid-table-form>
</p-dialog>

<p-sidebar
    [style]="{ width: '1200px' }"
    [(visible)]="displayAddUserByUser" 
    position="right">
    <ng-template pTemplate="header">
        <svg width="14" height="12" viewBox="0 0 14 12" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M1.41 0L0 1.41L4.58 6L0 10.59L1.41 12L7.41 6L1.41 0Z" fill="#2B2F33"/>
            <path d="M8 0L6.59 1.41L11.17 6L6.59 10.59L8 12L14 6L8 0Z" fill="#2B2F33"/>
        </svg> &nbsp;&nbsp;
        Thêm nhân viên áp dụng chính sách </ng-template>
    <div class="search-in">
        <div class="search-group fields d-flex pt-0" style="display: flex">
            <div class="col-6 pt-0 pb-0" style="padding-right: 10px !important;border-right: 1px solid #ebe8e8;">
                <div class="fields no-border mb-0">
                    <p-dropdown appendTo="body" [baseZIndex]="100" [autoDisplayFirst]="false" placeholder="Tìm kiếm theo công ty" 
                    [options]="listCompanies" [(ngModel)]="query.companyId" name="searchBy" (onChange)="searchEmp()">
                    <ng-template let-item pTemplate="selectedItem">
                        <span>{{item.label}}</span>
                    </ng-template>
                    <ng-template let-car pTemplate="item">
                        <div class="ui-helper-clearfix" style="position: relative;height: 25px;">
                            <div>{{car.label}}</div>
                        </div>
                    </ng-template>
                </p-dropdown>
                </div>
            </div>
            <div class="p-0 col-6">
                <div class="fields no-border mb-0">
                    <input type="text" class="form-control" placeholder="Nhập từ khóa tìm kiếm"
                    [(ngModel)]="query.filter" (keyup.enter)="searchEmp()">
                </div>
                </div>
        </div>
    </div>
    <div class="section-box" *ngIf="columnDefs2.length > 0" >
        <app-list-grid-angular 
            [domLayout]="'autoHeight'" 
            *ngIf="columnDefs2.length > 0" 
            [idGrid]="gridKey + '_45dfs34343'"
            [title]="'Chứng chỉ'"
            [listsData]="listsData2" 
            [rowSelection]="'multiple'"
            (showConfig)="CauHinh()"
            (onCellClicked)="onCellClicked($event)"
            (callback)="rowSelected($event)"
            [columnDefs]="columnDefs2">
        </app-list-grid-angular>
    </div>
<!-- <app-loading-grid [columnNumber]="10" *ngIf="columnDefs2.length === 0"  [gridtype]="'hsnv'" [value]="[1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7]"></app-loading-grid> -->
    <ng-template pTemplate="footer">
        <div class="grid">
            <div class="col-7 box-view d-flex middle" style="border: 1px solid #ccc;">
                Ngày áp dụng:  
                <div class="d-flex relative bet ml-1" style="width: 51%;" *ngIf="listDataSelect.length > 0">
                    <div class="fields no-border">
                        <p-calendar placeholder="Từ ngày" 
                        panelStyleClass="datepicker-default" placeholder="Từ ngày (DD/MM/YYYY)"
                        [appendTo]="'body'" [baseZIndex]="101" [(ngModel)]="query.from_date" 
                        [monthNavigator]="true"
                        [yearNavigator]="true" inputId="navigators" dateFormat="dd/mm/yy"
                        name="fromdate"></p-calendar>
                    </div>
                    <span class="pi pi-arrow-right" style="position: absolute;left: 45%;z-index: 9;transform: translateX(-100%);top: 2px;"></span>
                    <div class="fields no-border">
                        <p-calendar placeholder="Đến ngày" 
                        panelStyleClass="datepicker-default" placeholder="Đến ngày (DD/MM/YYYY)"
                        [appendTo]="'body'" [baseZIndex]="101" [(ngModel)]="query.to_date" 
                        [monthNavigator]="true" 
                        [yearNavigator]="true" inputId="navigators" dateFormat="dd/mm/yy"
                        name="fromdate"></p-calendar>
                    </div>
                </div>
            </div> 
            <div class="col-5 d-flex gap4 end">
                <button type="button" pButton class="p-button-primary mr-1 p-button-text"  label="{{listsData2.length}} kết quả"></button>
                <button type="button" pButton icon="pi pi-check" label="Lưu lại ({{listDataSelect.length}})" (click)="save()"></button>
                <button type="button" class="p-button-secondary p-button" pButton icon="pi pi-times" label="Hủy bỏ" (click)="displayAddUserByUser = !displayAddUserByUser"></button>
            </div>
        </div>
    </ng-template>
</p-sidebar>