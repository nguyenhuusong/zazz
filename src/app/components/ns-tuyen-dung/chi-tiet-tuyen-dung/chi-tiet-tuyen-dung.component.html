<div class="main-grid product-detail" style="position: relative;">
    <section class="bread-crumb">
        <app-hrm-breadcrumb [items]="items"></app-hrm-breadcrumb>
    </section>
    <section class="content" style="
    position: absolute;
    top: 5px;
    right: 0px;
">
        <div class="gap12 d-flex end"  *ngIf="tabIndex === 0" >
        <div class="fields btn status mb-0">
            <p-dropdown 
                *ngIf="listViews.length> 0 && status.length > 0" 
                [options]="status" 
                (onChange)="recruiUpdateStatus()"
                [(ngModel)]="selectedCountry" 
                [styleClass]="selectedCountry?.bgColor"  
                optionLabel="name"  
                placeholder="Chọn trạng thái">
                <ng-template pTemplate="selectedItem" >
                    <div class="flex align-items-center gap-2" *ngIf="selectedCountry" >
                        <div>{{ selectedCountry.name}}</div>
                    </div>
                </ng-template>
                <ng-template let-country pTemplate="item">
                    <div class="flex align-items-center gap-2" *ngIf="country.value != selectedCountry.value">
                        <div class="pb-2 pt-2 gap-2" style="display: flex; align-items: center; width: 100%;justify-content: space-around;font-size: 13px;">
                            <span style="white-space:nowrap">{{ country.placeholder }} </span>
                            <span class="pi pi-arrow-right" style="font-size: 12px;"></span>
                            <span [class]="country.textColor" style="white-space:nowrap">{{ country.name }}</span>
                        </div>
                    </div>
                </ng-template>
            </p-dropdown>
        </div>
        <p-splitButton icon="{{ menuActions[0].icon }} uni-white-color" *ngIf="menuActions.length > 0" styleClass="p-button-sm" [appendTo]="'body'" (onClick)="callActions(menuActions[0].value)" [label]="menuActions[0].label" [model]="menuActions"></p-splitButton>
        <p-button label="Quay lại" (click)="quaylai('')" styleClass="p-button-secondary p-button-sm" [style]="{'z-index': 9}" icon="pi pi-directions-alt"></p-button>
    </div>
    </section>
    <section>
        <p-tabView (onChange)="handleChange($event.index)" [(activeIndex)]="tabIndex">
            <p-tabPanel header="Thông tin tuyển dụng">
                <app-edit-detail 
                    *ngIf="listViews.length> 0 && tabIndex === 0" 
                    [isHideButton]="true" 
                    [detail]="detailInfo" 
                    [manhinh]="'Edit'" 
                    [isNested]="true"
                    [optionsButtonsEdit]="optionsButon" 
                    [dataView]="listViews" 
                    (callback)="setCandidateInfo($event)"
                    (callbackcancel)="quaylai($event)" 
                    (callBackForm)="callBackForm($event)">
                </app-edit-detail>
                <div class="grid mt-0">
                    <div class="col-12 pb-0">
                        <app-ho-so *ngIf="listViews.length > 0" [canId]="modelEdit.canId" (callBack)="callBackCandidateFile()"></app-ho-so>
                    </div>
                </div>
                <app-loading-detail [id]="'chi-tiet-tuyen-dung'" *ngIf="listViews.length === 0">
                </app-loading-detail>
            </p-tabPanel>
            <p-tabPanel header="Thông tin phỏng vấn" >
                <app-tab-candidate-interview  *ngIf="tabIndex === 1" [canId]="modelEdit.canId" ></app-tab-candidate-interview>
            </p-tabPanel>
            <p-tabPanel header="Thông tin đi làm">
                <app-tab-candidate-final *ngIf="tabIndex === 2" [canId]="modelEdit.canId"></app-tab-candidate-final>
            </p-tabPanel>
            <p-tabPanel header="Hồ sơ cá nhân" *ngIf="custId">
                <div class="position-btn-top">
                    <app-chi-tiet-ho-so-ca-nhan 
                        *ngIf="tabIndex === 3" 
                        [isDialog]="true" [displayCustomerProfile]="false" [custId]="custId"
                        [canId]="modelEdit.canId" 
                        (callback)="callbackSaveProfile()">
                    </app-chi-tiet-ho-so-ca-nhan>
                </div>
            </p-tabPanel>
        </p-tabView>

    </section>
    <section *ngIf="isView" class="pt-0">
        <div class="col-12 section-box">
            <div class="d-flex bet middle">
                <h3>Lịch sử</h3>
            </div>
            <div class="grid-default">
                <app-list-grid-angular *ngIf="columnDefs.length > 0" [listsData]="listData" [height]="heightGrid"
                    [columnDefs]="columnDefs">
                </app-list-grid-angular>
            </div>
        </div>
    </section>
</div>


<app-chi-tiet-ho-so-ca-nhan *ngIf="displayCustomerProfile" [displayCustomerProfile]="displayCustomerProfile" [isDialog]="true" [custId]="custId"
[canId]="modelEdit.canId" (callback)="callbackSaveProfile()"></app-chi-tiet-ho-so-ca-nhan>


<p-sidebar
    [style]="{ width: '80%' }"
    [(visible)]="displayAddCCCD" 
    position="right">
    <ng-template pTemplate="header">
        <svg width="14" height="12" viewBox="0 0 14 12" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M1.41 0L0 1.41L4.58 6L0 10.59L1.41 12L7.41 6L1.41 0Z" fill="#2B2F33"/>
            <path d="M8 0L6.59 1.41L11.17 6L6.59 10.59L8 12L14 6L8 0Z" fill="#2B2F33"/>
        </svg> &nbsp;&nbsp;
        Tải lên CCCD,  Hộ chiếu </ng-template>
    <ng-template pTemplate="footer"></ng-template>
    <app-cung-cap-cccd *ngIf="displayAddCCCD" [canId]="modelEdit.canId" (callback)="saveCCCD($event)"></app-cung-cap-cccd>
</p-sidebar>

<!-- Gửi email -->
<p-sidebar
    [style]="{ width: '80%' }"
    [(visible)]="isSendMail" 
    styleClass="hideHeaderForm"
    position="right">
    <ng-template pTemplate="header">
        <svg width="14" height="12" viewBox="0 0 14 12" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M1.41 0L0 1.41L4.58 6L0 10.59L1.41 12L7.41 6L1.41 0Z" fill="#2B2F33"/>
            <path d="M8 0L6.59 1.41L11.17 6L6.59 10.59L8 12L14 6L8 0Z" fill="#2B2F33"/>
        </svg> &nbsp;&nbsp;
        Gửi mail </ng-template>
        <div class="fields" >
            <label>Nội dung gửi <span style="color: red">*</span></label>
            <p-dropdown appendTo="body" [baseZIndex]="100" [autoDisplayFirst]="false"
            [options]="mailsInput" placeholder="Chọn nội dung gửi" [(ngModel)]="mailInputValue" name="mailInputValue">
            </p-dropdown>
        </div>
            <ng-template pTemplate="footer">
                <div class="d-flex end" >
                  <p-button (click)="sendEmail()" >Gửi email</p-button>
                </div>
            </ng-template>
</p-sidebar>