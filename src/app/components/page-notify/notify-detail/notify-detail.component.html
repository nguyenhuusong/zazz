

<div class="main-grid product-detail">
  <section class="section-box flex gap-1">
    <i class="pi pi-angle-left" style="font-size: 1.3rem; cursor: pointer;" (click)="onBackPage()"></i>
    <div class="breadcrumb">
      <h3>{{titlePage}}</h3>
        <p-breadcrumb [model]="items"></p-breadcrumb>
    </div>
  </section>
  <section>
    <div class="content" style="position: relative;">
      <p-tabView [(activeIndex)]="indexTab" (onChange)="handleChange($event.index)">
        <p-tabPanel header="Thông tin chung">
          <div class="box mb-2" *ngIf="!notiId">
            <div class="fields">
              <label for="">Mẫu thông báo</label>
              <p-dropdown placeholder="Chọn mẫu thông báo" appendTo="body" [baseZIndex]="100" [autoDisplayFirst]="false" 
                  [options]="notifyTempList" [required] [(ngModel)]="notifyTempId"
                  (onChange)="changeNotiTem()"
                  name="tempId" [filter]="true">
                  <ng-template let-item pTemplate="selectedItem">
                      <span>{{item.label}}</span>
                  </ng-template>
                  <ng-template let-car pTemplate="item">
                      <div class="ui-helper-clearfix" style="position: relative;height: 25px;">
                          <div style="font-size:14px;float:left;margin-top:4px">{{car.label}}</div>
                      </div>
                  </ng-template>
              </p-dropdown>
            </div>
          </div>
            <app-edit-detail *ngIf="listViews.length> 0 && manhinh === 'Edit'"  [detail]="dataInfo"
              [manhinh]="manhinh" [modelMarkdow]="modelMarkdow" [dataView]="listViews" [optionsButtonsEdit]="optionsButon"
              (callback)="saveNotifyInfo($event)" (callbackcancel)="cancelUpload($event)"></app-edit-detail>
              <app-loading-detail 
                  [id]="'markdown'" 
                  *ngIf="listViews.length === 0">
              </app-loading-detail>

          <app-notify-comments [notify]="dataInfo"></app-notify-comments>
          <p-divider align="center" *ngIf="notiId">
            <span class="p-tag">Cấu hình email</span>
        </p-divider>
          <app-get-notify-to  *ngIf="listViews.length > 0" [modelMarkdow]="modelMarkdow" [notify]="dataInfo" [listViewsMaster]="listViews" [modelNotifyTo]="modelNotifyTo"  [n_id]="notiId" ></app-get-notify-to>
        </p-tabPanel>
          <p-tabPanel header="Danh sách gửi thông báo" *ngIf="notiId" leftIcon="pi pi-bell">
            <div class="pt-2">
                <app-grid-push-list 
                  [notify]="dataInfo" 
                  *ngIf="indexTab === 1" 
                  [indexTab]="indexTab" 
                  (send)="displayDsThongBao($event)" 
                  [loadForm]="loadForm" 
                  (saveStore)="displayDsCaiDatDS($event)" 
                  (deleteRooms)="deleteRooms($event)"></app-grid-push-list>
                </div>
            </p-tabPanel>
      </p-tabView>
    </div>
  </section>
</div>
    <!-- <p-dialog [(visible)]="displaySend" styleClass="paginator-bottom" [autoZIndex]="true" [modal]="true" [style]="{width: '1300px', height: 'auto'}">
        <p-header>
          Gửi thông báo
        </p-header>
       <app-send-notify [notify]="dataInfo" *ngIf="displaySend" (reload)="backpageSend()"></app-send-notify>
      </p-dialog> -->

      <p-sidebar
        [style]="{ width: '80%' }"
        [(visible)]="displaySend" 
        position="right">
        <ng-template pTemplate="header">
            <svg width="14" height="12" viewBox="0 0 14 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M1.41 0L0 1.41L4.58 6L0 10.59L1.41 12L7.41 6L1.41 0Z" fill="#2B2F33"/>
                <path d="M8 0L6.59 1.41L11.17 6L6.59 10.59L8 12L14 6L8 0Z" fill="#2B2F33"/>
            </svg> &nbsp;&nbsp;
            Gửi thông báo </ng-template>
        <ng-template pTemplate="footer"></ng-template>
        <app-send-notify [notify]="dataInfo" *ngIf="displaySend" (reload)="backpageSend()"></app-send-notify>
    </p-sidebar>
      
      <!-- <p-dialog [(visible)]="displayStore" [autoZIndex]="true" [modal]="true" [style]="{width: '1300px', height: 'auto'}">
        <p-header>
          Gửi thông báo
        </p-header>
       <app-store-notify [notify]="dataInfo" [isNotifi]="true" *ngIf="displayStore"  (reload)="backpagestore()"></app-store-notify>
      </p-dialog> -->

      <p-sidebar
      [style]="{ width: '80%' }"
      [(visible)]="displayStore" 
      position="right">
      <ng-template pTemplate="header">
          <svg width="14" height="12" viewBox="0 0 14 12" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M1.41 0L0 1.41L4.58 6L0 10.59L1.41 12L7.41 6L1.41 0Z" fill="#2B2F33"/>
              <path d="M8 0L6.59 1.41L11.17 6L6.59 10.59L8 12L14 6L8 0Z" fill="#2B2F33"/>
          </svg> &nbsp;&nbsp;
          Gửi thông báo </ng-template>
      <ng-template pTemplate="footer"></ng-template>
      <app-store-notify [notify]="dataInfo" [isNotifi]="true" *ngIf="displayStore"  (reload)="backpagestore()"></app-store-notify>
  </p-sidebar>
  