
<div class="main-grid product-detail chi-tiet-ho-so-nhan-su">
    <section class="head-detail">
        <div class="breadcrumb">
            <p-breadcrumb [model]="items"></p-breadcrumb>
            <h3 class="d-flex middle"><svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M11.3337 5.33341H3.22033L6.94699 1.60675L6.00033 0.666748L0.666992 6.00008L6.00033 11.3334L6.94033 10.3934L3.22033 6.66675H11.3337V5.33341Z" fill="#2B2F33" fill-opacity="0.6"/>
                </svg> &nbsp;
                {{titlePage}}</h3>
        </div>
        <p-listbox [options]="menuItems" [(ngModel)]="selectedMenuCode"
            (onChange)="onChangeMenu($event.value)" optionLabel="name" optionValue="code">
            <ng-template let-country pTemplate="item">
                <div class="country-item">
                    <div><span style="">{{country.name}} </span>
                        <!-- <span *ngIf="country.code === 'GetEmployeeByJob'"
                            [innerHTML]="detailInfo?.emp_status"></span>
                        <span
                            *ngIf="country.code === 'GetEmployeeByContract'"
                            [innerHTML]="detailInfo?.contract_status"></span>
                        <span
                            *ngIf="country.code === 'GetEmployeeByQualification' && !detailInfo?.isProfileFull"
                            class="bg-danger noti-number ml5">Chưa tạo</span> -->
                    </div>
                </div>
            </ng-template>
        </p-listbox>
    </section>
    <section>
        <div class="status-line col-10 m-auto">
            <p-steps [model]="stepsLine" [(activeIndex)]="activeIndex" [readonly]="true"></p-steps>
        </div>
    </section>
    <section>
        <div class="bg-grey base-info-em d-flex middle bet">
            <ul>
                <li>
                    <span class="label">Nhân viên:</span>
                    <span class="value"> {{ detailInfo?.fullName }}</span>
                </li>
                <li class="spre"><svg width="1" height="20" viewBox="0 0 1 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <line x1="0.5" x2="0.5" y2="20" stroke="#A3A9B9"/>
                    </svg>
                    </li>
                <li>
                    <span class="label">MNV:</span>
                    <span class="value"> {{codeStaff}}</span>
                </li>
            </ul>
            <div>
                <div class="buttons" *ngIf="detailInfo?.emp_st === 1 && selectedMenuCode === 'GetEmployeeByJob'" >
                    <p-button (click)="cancelUpdate('ChuyenCongTac')">
                        <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M8.42992 2.57992H12.4299V4.57992H8.82992L10.8299 6.57992H18.4299V14.1799L20.4299 16.1799V6.57992C20.4299 5.46992 19.5399 4.57992 18.4299 4.57992H14.4299V2.57992C14.4299 1.46992 13.5399 0.579922 12.4299 0.579922H8.42992C7.43992 0.579922 6.62992 1.27992 6.46992 2.21992L8.42992 4.17992V2.57992ZM1.82992 0.419922L0.419922 1.82992L3.16992 4.57992H2.42992C1.31992 4.57992 0.439922 5.46992 0.439922 6.57992L0.429922 17.5799C0.429922 18.6899 1.31992 19.5799 2.42992 19.5799H18.1699L20.1699 21.5799L21.5799 20.1699L1.82992 0.419922ZM2.42992 17.5799V6.57992H5.16992L16.1699 17.5799H2.42992Z" fill="white"/>
                            </svg>
                            
                        &nbsp;
                        Chuyển công tác</p-button>&nbsp;
                    <p-button (click)="cancelUpdate('NghiViec')">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M6.59 5.17L1.41 0L0 1.41L5.17 6.58L6.59 5.17ZM10.5 0L12.54 2.04L0 14.59L1.41 16L13.96 3.46L16 5.5V0H10.5ZM10.83 9.41L9.42 10.82L12.55 13.95L10.5 16H16V10.5L13.96 12.54L10.83 9.41Z" fill="white"/>
                        </svg>
                        &nbsp;
                        Nghỉ việc</p-button>

                </div>
                <!-- detailInfo?.emp_st === 0 &&  -->
                <p-button *ngIf="selectedMenuCode === 'GetEmployeeByContract'" (click)="cancelUpdate('TaoHopDong')">
                    <svg width="18" height="21" viewBox="0 0 18 21" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M7.97231 5.18824H3.94521V7.16471H8.68264C8.33591 6.56442 8.0912 5.89765 7.97231 5.18824Z" fill="#F3F8FF"/>
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M13.8082 10.1294V19.0235H6.90411V14.0824H1.9726V3.21176H7.97231C8.0912 2.50235 8.33591 1.83558 8.68264 1.23529H0V15.0706L5.91781 21H15.7808V9.79174C15.1638 10.0104 14.4998 10.1294 13.8082 10.1294ZM5.42466 18.0353L2.9589 15.5647H5.42466V18.0353Z" fill="#F3F8FF"/>
                        <path d="M10.5368 9.14118C10.9381 9.40848 11.3737 9.62804 11.8356 9.79174V11.1176H3.94521V9.14118H10.5368Z" fill="#F3F8FF"/>
                        <path d="M14.4493 3.55765V1.97647H13.1671V3.55765H11.589V4.84235H13.1671V6.42353H14.4493V4.84235H16.0274V3.55765H14.4493Z" fill="#F3F8FF"/>
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M13.8082 0C11.4943 0 9.61644 1.88153 9.61644 4.2C9.61644 6.51847 11.4943 8.4 13.8082 8.4C16.1222 8.4 18 6.51847 18 4.2C18 1.88153 16.1222 0 13.8082 0ZM10.8986 4.2C10.8986 2.5932 12.2046 1.28471 13.8082 1.28471C15.4119 1.28471 16.7178 2.5932 16.7178 4.2C16.7178 5.8068 15.4119 7.11529 13.8082 7.11529C12.2046 7.11529 10.8986 5.8068 10.8986 4.2Z" fill="#F3F8FF"/>
                    </svg>
                    &nbsp;
                    Tạo hợp đồng</p-button>
                </div>
        </div>
        <div class="content page-detail" style="padding: 0;">
            <p-panel styleClass="no-header">
                <div class="">
                    <div class="row col-md-12">
                        <!-- <p-selectButton [options]="optionsButtonsView"
                        *ngIf="listViews.length> 0 && manhinh === 'View'" optionLabel="label"
                        optionValue="value" (onChange)="onChangeButtonView($event)"> -->
                    <!-- </p-selectButton> <p-button *ngIf="selectedMenuCode === API_PROFILE.QUAN_HE_LAO_DONG && manhinh === 'View'" label="Tạo hợp đồng" (click)="taohopdong()" styleClass="p-button-outlined ml-1 p-button-secondary"></p-button> -->
                    <p-overlayPanel #op [style]="{width: '450px'}">
                        <ng-template pTemplate>
                            <label for="" >Chọn loại hợp đồng</label> <br>
                            <p-dropdown [autoZIndex]="true" [autoDisplayFirst]="false" [style]="{'width': '100%'}" [options]="listContractTypes"
                            [(ngModel)]="modelContractInfo.contractTypeId" name="contractTypeId" (onChange)="taohopdong();op.hide()">
                            <ng-template let-item pTemplate="selectedItem">
                                <span style="vertical-align:middle;">{{item.label}}</span>
                            </ng-template>
                            <ng-template let-car pTemplate="item">
                                <div class="ui-helper-clearfix" style="position: relative;height: 25px;">
                                    <div style="font-size:14px;float:right;margin-top:4px">{{car.label}}</div>
                                </div>
                            </ng-template>
                        </p-dropdown>
                        </ng-template>
                    </p-overlayPanel>
                    </div>
                    <!-- <app-view-detail *ngIf="listViews.length> 0 && manhinh === 'View'"
                        [detail]="detailInfo" [manhinh]="manhinh" [thongtinnhanvienNew]="true"
                        [dataView]="listViews" (callback)="setEmployeeInfo($event)">
                    </app-view-detail>
                    <app-edit-detail *ngIf="listViews.length> 0 && manhinh === 'Edit'"
                        [detail]="detailInfo" [manhinh]="manhinh" [thongtinnhanvienNew]="true"
                        [dataView]="listViews" (callback)="setEmployeeInfo($event)"
                        (callbackcancel)="cancelUpdate()"></app-edit-detail> -->
                    <div class="page-detail-edit-detail" *ngIf="selectedMenuCode !== API_PROFILE.QUAN_LY_TAI_KHOAN">
                        <app-edit-detail *ngIf="listViews.length> 0" 
                            [detail]="detailInfo" 
                            [detailInfo]="detailInfo" 
                            [thongtinnhanvienNew]="true" 
                            [manhinh]="'Edit'" 
                            [optionsButtonsEdit]="optionsButtonsView"  
                            [dataView]="listViews"
                            (callback)="setEmployeeInfo($event)" 
                            [optionsEdit]="detailMenu"
                            (callbackcancel)="cancelUpdate($event)">
                        </app-edit-detail>
                    </div>
                            
                    </div>
                        <div class="row d-flex timelines" *ngIf="selectedMenuCode === API_PROFILE.CONG_VIEC ">
                            <div class="col-md-12">
                                <div class="border-section">
                                    <p-card styleClass="mt-1 plr-16" >
                                        <ng-template pTemplate="header">
                                            <div class="row d-flex">
                                                <div class="col-md-6">
                                                    <div class="panel-heading p-panel-header">
                                                        <h6 class="panel-title p-panel-title  d-flex middle">
                                                            {{titles[0]}} &nbsp;<p-badge *ngIf="listsData[0].length > 0"
                                                                value="{{listsData[0].length}}" styleClass="p-mr-2">
                                                            </p-badge>
                                                        </h6>
                                                    </div>
                                                </div>
                                                <div class="col-md-6 justify-content-end text-right"
                                                    style="padding-right: 15px;">
                                                    <p-button *ngIf="selectedMenuCode === API_PROFILE.CONG_VIEC" styleClass="p-button-sm" (click)="addType0()"
                                                    [CheckHideActions]="{url:  MENUACTIONROLEAPI.GetEmployeePage.url, action: ACTIONS.CHI_TIET_HO_SO_THEM_MOI_THOI_GIAN_LAM_VIEC}"
                                                    >
                                                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                            <path d="M11 5H9V9H5V11H9V15H11V11H15V9H11V5ZM10 0C4.48 0 0 4.48 0 10C0 15.52 4.48 20 10 20C15.52 20 20 15.52 20 10C20 4.48 15.52 0 10 0ZM10 18C5.59 18 2 14.41 2 10C2 5.59 5.59 2 10 2C14.41 2 18 5.59 18 10C18 14.41 14.41 18 10 18Z" fill="#F3F8FF"/>
                                                            </svg>
                                                            &nbsp;Thêm mới
                                                    </p-button>
                                                </div>
                                            </div>
                                        </ng-template>
                                        <div class="grid-default border mt-2">
                                                <app-list-grid-angular  [domLayout]="'autoHeight'" [title]="'Danh sách liên hệ'" *ngIf="listsData[0].length > 0"
                                                    [listsData]="listsData[0]"  (FnClick)="OnClick($event)"
                                                    [columnDefs]="columnDefs[0]"></app-list-grid-angular>
                                                </div>
                                    </p-card>
                                </div>
                            </div>
                            <!-- <div class="col-md-4">
                                <div class="box">
                                    <p-card styleClass="mt-1" >
                                        <ng-template pTemplate="header">
                                            <div class="panel-heading">
                                                <h6 class="panel-title mb-0" style="color: black; ">Dòng
                                                    thời gian<p-badge *ngIf="listsData[0].length > 0"
                                                        value="{{listsData[0].length}}" styleClass="p-mr-2"></p-badge>
                                                </h6>
                                            </div>
                                        </ng-template>
                                    
                                        <p-timeline [value]="detailInfo?.timelines" styleClass="customized-timeline mt-4 nhan-vien-timeline"
                                        >
                                            <ng-template pTemplate="marker" let-event>
                                                <span class="custom-marker p-shadow-2" >
                                                    <i class="pi pi-{{event.icon}}"></i>
                                                </span>
                                            </ng-template>
                                            <ng-template pTemplate="content" let-event>
                                                <p-card [header]="event.status" [subheader]="event.date">
                                                    <p class="mt-1">{{event.note}}</p>
                                                </p-card>
                                            </ng-template>
                                        </p-timeline>
                                    </p-card>
                                </div>
                            </div> -->
                        </div>
                    

                        <div class="border-section mt-5" 
                                        *ngIf="selectedMenuCode === API_PROFILE.TIEN_ICH || selectedMenuCode === API_PROFILE.THONG_TIN_CA_NHAN
                                || selectedMenuCode === API_PROFILE.NGUOI_QUAN_LY
                                || selectedMenuCode === API_PROFILE.QUAN_HE_LAO_DONG || selectedMenuCode === API_PROFILE.THUE_BAO_HIEM
                            || selectedMenuCode === API_PROFILE.CHUYEN_MON 
                                || selectedMenuCode === API_PROFILE.NGUOI_DUNG" >
                            <p-card styleClass="mt-1 mb-4 p-card-header-custom plr-16">

                                    <ng-template pTemplate="header">
                                        <div class="row d-flex">
                                            <div class="col-md-6">
                                                <div class="panel-heading p-panel-header mb-0" >
                                                    <h6 class="panel-title p-panel-title d-flex middle" >
                                                        {{titles[0]}} &nbsp;<p-badge *ngIf="listsData[0].length > 0"
                                                            value="{{listsData[0].length}}" styleClass="p-mr-2">
                                                        </p-badge>
                                                    </h6>
                                                </div>
                                            </div>
                                            <div class="col-md-6 justify-content-end text-right">
                                                <p-button *ngIf="selectedMenuCode === API_PROFILE.THUE_BAO_HIEM
                                                || selectedMenuCode === API_PROFILE.NGUOI_DUNG" styleClass="p-button-sm" (click)="addType0()">
                                                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                        <path d="M11 5H9V9H5V11H9V15H11V11H15V9H11V5ZM10 0C4.48 0 0 4.48 0 10C0 15.52 4.48 20 10 20C15.52 20 20 15.52 20 10C20 4.48 15.52 0 10 0ZM10 18C5.59 18 2 14.41 2 10C2 5.59 5.59 2 10 2C14.41 2 18 5.59 18 10C18 14.41 14.41 18 10 18Z" fill="#F3F8FF"/>
                                                        </svg>
                                                        &nbsp;Thêm mới
                                                </p-button>
                                            </div>
                                        </div>
                                    </ng-template>
                                <div class="grid-default border mb-7">
                                    <app-list-grid-angular  [domLayout]="'autoHeight'"  [title]="'Danh sách liên hệ'" *ngIf="listsData[0].length > 0"
                                        [listsData]="listsData[0]"  (FnClick)="OnClick($event)"
                                        [columnDefs]="columnDefs[0]"></app-list-grid-angular>
                                </div>
                            </p-card>
                        </div>


                        <div class="border-section mt-5"
                                    *ngIf="selectedMenuCode === API_PROFILE.CHUYEN_MON 
                                || selectedMenuCode === API_PROFILE.THUE_BAO_HIEM
                                || selectedMenuCode === API_PROFILE.THONG_TIN_CA_NHAN
                                || selectedMenuCode === API_PROFILE.NGUOI_QUAN_LY
                                || selectedMenuCode === API_PROFILE.CONG_VIEC
                                || selectedMenuCode === API_PROFILE.QUAN_HE_LAO_DONG ">
                            <p-card styleClass="mt-1 mb-4 p-card-header-custom plr-16">
                                <ng-template pTemplate="header">
                                    <div class="row d-flex">
                                        <div class="col-md-6">
                                            <div class="panel-heading p-panel-header" >
                                                <h6 class="panel-title mb-0 p-panel-title d-flex middle">
                                                    {{titles[1]}} &nbsp;<p-badge *ngIf="listsData[1].length > 0"
                                                        value="{{listsData[1].length}}" styleClass="p-mr-2">
                                                    </p-badge>
                                                </h6>
                                            </div>
                                        </div>
                                        <div class="col-md-6 justify-content-end text-right">
                                            <p-button *ngIf="selectedMenuCode === API_PROFILE.THONG_TIN_CA_NHAN"
                                                label="Thông tin hồ sơ" icon="pi pi-book"
                                                styleClass="p-button-sm" (click)="createContract()"></p-button>
                                            <p-button
                                                *ngIf=" selectedMenuCode === API_PROFILE.THUE_BAO_HIEM" styleClass="p-button-sm"
                                                (click)="createAttach()">
                                                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M11 5H9V9H5V11H9V15H11V11H15V9H11V5ZM10 0C4.48 0 0 4.48 0 10C0 15.52 4.48 20 10 20C15.52 20 20 15.52 20 10C20 4.48 15.52 0 10 0ZM10 18C5.59 18 2 14.41 2 10C2 5.59 5.59 2 10 2C14.41 2 18 5.59 18 10C18 14.41 14.41 18 10 18Z" fill="#F3F8FF"/>
                                                    </svg>
                                                    &nbsp;Thêm mới
                                            </p-button>
                                                <p-button
                                                *ngIf=" selectedMenuCode === API_PROFILE.NGUOI_QUAN_LY" styleClass="p-button-sm"
                                                (click)="onAddUserLogin()">
                                                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M11 5H9V9H5V11H9V15H11V11H15V9H11V5ZM10 0C4.48 0 0 4.48 0 10C0 15.52 4.48 20 10 20C15.52 20 20 15.52 20 10C20 4.48 15.52 0 10 0ZM10 18C5.59 18 2 14.41 2 10C2 5.59 5.59 2 10 2C14.41 2 18 5.59 18 10C18 14.41 14.41 18 10 18Z" fill="#F3F8FF"/>
                                                    </svg>
                                                    &nbsp;Thêm mới
                                            </p-button>    
                                        </div>
                                    </div>
                                </ng-template>
                                <!-- Thông tin hồ sơ cá nhân -->
                                <app-list-grid-angular *ngIf="selectedMenuCode === API_PROFILE.THONG_TIN_CA_NHAN" [domLayout]="'autoHeight'" [title]="'Chứng chỉ'"
                                    [listsData]="listsDataRecord" (FnClick)="OnClick($event)" [columnDefs]="columnDefsRecord"></app-list-grid-angular>
                                <div class="grid-default border mt-2" *ngIf="listsData[1].length > 0">
                                    <app-list-grid-angular  [domLayout]="'autoHeight'" [title]="'Danh sách liên hệ'"
                                        [listsData]="listsData[1]" (FnClick)="OnClick($event)"
                                        [columnDefs]="columnDefs[1]"></app-list-grid-angular>
                                    </div>
                            </p-card>
                            
                        </div>

                    
                        <!-- <div class="page-detail-edit-detail" *ngIf="listViewsReportTo.length> 0">
                            <div class="d-flex justify-content-end" style="margin-bottom: 0;position: absolute; z-index: 9;right: 20px;">
                                    <p-button label="Lưu lại" icon="pi pi-check" (click)="saveReportTo()" styleClass="p-button-sm"></p-button>
                            </div>dsfdsf
                            <app-edit-detail *ngIf="listViewsReportTo.length> 0"
                                [detail]="detailInfoReportTo" 
                                [thongtinnhanvienNew]="true" 
                                [manhinh]="'Edit'" 
                                [optionsButtonsEdit]="[]"  
                                [dataView]="listViewsReportTo"
                                (callback)="setEmployeeInfo($event)" 
                                (callbackcancel)="cancelUpdateViewsReportTo($event)">
                            </app-edit-detail>
                        </div> -->

                        <div class="border-section mt-5" *ngIf="selectedMenuCode === API_PROFILE.CHUYEN_MON || selectedMenuCode === API_PROFILE.THONG_TIN_CA_NHAN
                        || selectedMenuCode === API_PROFILE.QUAN_LY_TAI_KHOAN">
                                <p-card styleClass="mt-1 mb-4 p-card-header-custom plr-16" >

                                    <ng-template pTemplate="header">
                                        <div class="row d-flex">
                                            <div class="col-md-6">
                                                <div class="panel-heading p-panel-header">
                                                    <h6 class="panel-title p-panel-title d-flex middle" >
                                                        {{titles[2]}} &nbsp;<p-badge *ngIf="listsData[2].length > 0"
                                                            value="{{listsData[2].length}}" styleClass="p-mr-2"></p-badge>
                                                    </h6>
                                                </div>
                                            </div>
                                            <div class="col-md-6 justify-content-end text-right">
                                                <p-button
                                                    *ngIf="selectedMenuCode === API_PROFILE.THONG_TIN_CA_NHAN " styleClass="p-button-sm"
                                                    (click)="createAttach()"
                                                    [CheckHideActions]="{url:  MENUACTIONROLEAPI.GetEmployeePage.url, action: ACTIONS.CHI_TIET_HO_SO_THEM_MOI_FILE_DINH_KEM}"
  
                                                    >
                                                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                        <path d="M11 5H9V9H5V11H9V15H11V11H15V9H11V5ZM10 0C4.48 0 0 4.48 0 10C0 15.52 4.48 20 10 20C15.52 20 20 15.52 20 10C20 4.48 15.52 0 10 0ZM10 18C5.59 18 2 14.41 2 10C2 5.59 5.59 2 10 2C14.41 2 18 5.59 18 10C18 14.41 14.41 18 10 18Z" fill="#F3F8FF"/>
                                                        </svg>
                                                        &nbsp;Thêm mới
                                                </p-button>
                                                    <p-button
                                                    *ngIf=" selectedMenuCode === API_PROFILE.CONG_VIEC" styleClass="p-button-sm"
                                                    
                                                    (click)="onAddUserLogin()">
                                                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                        <path d="M11 5H9V9H5V11H9V15H11V11H15V9H11V5ZM10 0C4.48 0 0 4.48 0 10C0 15.52 4.48 20 10 20C15.52 20 20 15.52 20 10C20 4.48 15.52 0 10 0ZM10 18C5.59 18 2 14.41 2 10C2 5.59 5.59 2 10 2C14.41 2 18 5.59 18 10C18 14.41 14.41 18 10 18Z" fill="#F3F8FF"/>
                                                        </svg>
                                                        &nbsp;Thêm mới
                                                </p-button>  
                                            </div>
                                        </div>
                                    </ng-template>

                                        <div class="grid-default border">
                                            <app-list-grid-angular  
                                                [domLayout]="'autoHeight'" [title]="'Danh sách liên hệ'" *ngIf="listsData[2].length > 0"
                                                [listsData]="listsData[2]" (FnClick)="OnClick($event)"
                                                (onCellClicked)="cellClick($event)"
                                                [columnDefs]="columnDefs[2]"></app-list-grid-angular>
                                            </div>
                                </p-card>
                        </div>
                        <!-- // chứng chỉ 
                         || selectedMenuCode === API_PROFILE.THONG_TIN_CA_NHAN
                        -->
                        <div class="border-section mt-5"  *ngIf="selectedMenuCode === API_PROFILE.CHUYEN_MON">
                                <p-card styleClass="mt-1 mb-4 plr-16">
                                    <ng-template pTemplate="header">
                                        <div class="row d-flex">
                                            <div class="col-md-6">
                                                <div class="panel-heading p-panel-header">
                                                    <h6 class="panel-title p-panel-title d-flex middle">
                                                        {{titles[3]}} &nbsp;<p-badge *ngIf="listsData[3].length > 0"
                                                            value="{{listsData[3].length}}" styleClass="p-mr-2"></p-badge>
                                                    </h6>
                                                </div>
                                            </div>
                                            <div class="col-md-6 justify-content-end text-right">
                                                <p-button *ngIf="selectedMenuCode === API_PROFILE.THONG_TIN_CA_NHAN" 
                                                    label="Thêm mới" styleClass="p-button-sm"
                                                    icon="pi pi-plus" (click)="addType3()"></p-button>
                                                    <p-button label="Thêm mới CMND/CCCD/HC" *ngIf="selectedMenuCode === API_PROFILE.THONG_TIN_CA_NHAN" icon="pi pi-plus" styleClass="p-button-sm p-button-info"
                                                    (click)="showPopupUploadCard()"></p-button>
                                                    <!-- cũ - ẩn -->
                                            </div>
                                        </div>

                                    </ng-template>
                                    <div class="grid-default border">
                                        <app-list-grid-angular  [domLayout]="'autoHeight'" [title]="'Chứng chỉ'" *ngIf="listsData[3].length > 0"
                                            [listsData]="listsData[3]" (FnClick)="OnClick($event)"
                                            [columnDefs]="columnDefs[3]"></app-list-grid-angular>
                                        </div>
                                </p-card>
                        </div>
                    <div class="border-section mt-5 mb-4"  *ngIf="selectedMenuCode === API_PROFILE.THONG_TIN_CA_NHAN">
                        <p-card styleClass="mt-1 plr-16" >
                            <ng-template pTemplate="header">
                                <div class="panel-heading p-panel-header">
                                    <h6 class="panel-title p-panel-title d-flex middle">
                                        {{titles[4]}} 
                                    </h6>
                                </div>
                            </ng-template>
                                <app-list-grid-angular  [height]=300 [title]="'Chứng chỉ'" *ngIf="listsData[4]?.length > 0"
                                    [listsData]="listsData[4]" (FnClick)="OnClick($event)"
                                    [columnDefs]="columnDefs[4]"></app-list-grid-angular>
                        </p-card>
                    </div>
            </p-panel>

            <!-- <div class="col-md-2" style="padding: 0">
                <p-image
                    src="{{detailInfo?.avatarUrl ? detailInfo?.avatarUrl : 'https://www.leviateair.com/wp-content/uploads/2017/01/No-Images.jpeg'}}"
                    [preview]="true" alt="Image" width="200"></p-image> -->
                <!-- <p-listbox [options]="menuItems" [(ngModel)]="selectedMenuCode" optionLabel="name" (onChange)="onChangeMenu($event.value)" optionValue="code"></p-listbox> -->
            <!-- </div> -->
            <p-dialog styleClass="popup-btngroup-edit-detail" header="{{titleForm.title}}" [(visible)]="displayDialog" [modal]="true" [draggable]="false"
            [resizable]="false" [style]="{width: '75vw'}" [autoZIndex]=true [draggable]="false" [resizable]="false">
                    <app-edit-detail
                        *ngIf="listViewsForm.length> 0 && displayDialog &&  (titleForm.type === 'DuyetHoSo' || titleForm.type === 'TuyenDungLai' || titleForm.type === 'ChuyenCongTac')"
                        [detail]="detailInfoForm" [manhinh]="manhinh" [thongtinnhanvienNew]="true" [dataView]="listViewsForm"
                        (callback)="xacNhan($event)" (callbackcancel)="cancelViewsForm($event)"></app-edit-detail>
                    <!-- <p-selectButton [options]="optionsButtonsSave"
                        *ngIf="titleForm.type === 'HuyHoSo' || titleForm.type === 'MoLaiHoSo' || titleForm.type === 'NghiViec'"
                        optionLabel="label" optionValue="value" (onChange)="onChangeButtonSave($event)"></p-selectButton> -->
                    <div *ngIf="titleForm.type !== 'ChuyenCongTac'">
                            <div class="col-md-6 mt-1">
                                <div class="field-group text" [ngClass]=" modelDuyet.full_name ? 'valid' : 'invalid' ">
                                    <label for="">Nhân viên</label>
                                    <input type="text" [value]="modelDuyet.full_name || 'No name'" disabled name="full_name" class="form-control">
                                </div>
                            </div>
                            <div class="col-md-6 mt-1"  *ngIf="titleForm.type === 'NghiViec'">
                                <div class="field-group select" [ngClass]=" modelDuyet.reason_id? 'valid' : 'invalid' ">
                                    <label for="">Lý do</label>
                                    <p-dropdown [autoZIndex]="true" [autoDisplayFirst]="false" [style]="{'width': '100%'}" [options]="terminateReasons"
                                    [(ngModel)]="modelDuyet.reason_id" name="reason_id">
                                    <ng-template let-item pTemplate="selectedItem">
                                        <span style="vertical-align:middle; margin-left: .5em">{{item.name}}</span>
                                    </ng-template>
                                    <ng-template let-car pTemplate="item">
                                        <div class="ui-helper-clearfix" style="position: relative;height: 25px;">
                                            <div style="font-size:14px;float:right;margin-top:4px">{{car.name}}</div>
                                        </div>
                                    </ng-template>
                                    </p-dropdown>
                                </div>
                            </div>
                            <div class="col-md-6 mt-1 ">
                                <div class="field-group date">
                                    <label for="">Ngày xác nhận</label>
                                    <p-calendar placeholder="DD/MM/YYYY" appendTo="body" [baseZIndex]="101" [(ngModel)]="modelDuyet.workDt"
                                        [monthNavigator]="true" [yearNavigator]="true" yearRange="2000:2030" inputId="navigators"
                                        dateFormat="dd/mm/yy" name="workDt"></p-calendar>
                                </div>
                            </div>
                            <div class="col-md-6 mt-1" *ngIf="titleForm.type === 'NghiViec'">
                                <div class="field-group date">
                                    <label for="">Ngày chốt nghỉ</label>
                                    <p-calendar placeholder="DD/MM/YYYY" appendTo="body" [baseZIndex]="101" [(ngModel)]="modelDuyet.exprire_date"
                                        [monthNavigator]="true" [yearNavigator]="true" yearRange="2000:2030" inputId="navigators"
                                        dateFormat="dd/mm/yy" name="exprire_date"></p-calendar>
                                </div>
                            </div>
                                <div class="col-md-12 mt-1">
                                    <div class="field-group textarea">
                                        <label for="">Ghi chú</label>
                                        <textarea [(ngModel)]="modelDuyet.comments" name="comments" cols="30" rows="10" class="form-control"></textarea>
                                    </div>
                                </div>
                    <div class="col-md-12 mt-1 text-right"  *ngIf="titleForm.type === 'HuyHoSo' || titleForm.type === 'MoLaiHoSo' || titleForm.type === 'NghiViec'">
                        <p-button label="Hủy" (click)="onChangeButtonSave('Back')" icon="pi pi-times" styleClass="p-button-sm p-button-secondary mr-1"></p-button>
                        <p-button label="Lưu lại" (click)="onChangeButtonSave('Save')" icon="pi pi-check" styleClass="p-button-sm "></p-button>
                    </div>
                </div>
        </p-dialog>

        <p-dialog header="Duyệt hợp đồng" [(visible)]="displayApproveContract" [modal]="true" [draggable]="false"
            [resizable]="false" [style]="{width: '40vw'}" [autoZIndex]=true [draggable]="false" [resizable]="false">
            <!-- <div class="row col-md-12 mt-1 select-default" >
                <div class="field-group select label-8">
                    <p-dropdown [autoZIndex]="true" [autoDisplayFirst]="false" [style]="{'width': '100%'}" [options]="statusApprover"
                    [(ngModel)]="modelDuyetHopDong.status" name="status">
                    <ng-template let-item pTemplate="selectedItem">
                        <span>{{item.label}}</span>
                    </ng-template>
                    <ng-template let-car pTemplate="item">
                        <div class="ui-helper-clearfix" style="position: relative;height: 25px;">
                            <div style="font-size:14px;float:right;margin-top:4px">{{car.label}}</div>
                        </div>
                    </ng-template>
                    </p-dropdown>
                    <label for="">Trạng thái duyệt</label>
                </div>
            </div> -->
            <div class="row col-md-12 mt-1" style="margin-top: 5px;">
                <div class="field-group textarea ">
                    <label for="">Ghi chú</label>
                    <textarea [(ngModel)]="modelDuyetHopDong.comment" name="comment" cols="30" rows="10" class="form-control"></textarea>
                </div>
            </div>

            <ng-template pTemplate="footer">
                <p-button icon="pi pi-check" (click)="duyetHoSo()" label="Xác nhận" styleClass=" p-button-sm mr-1">
                </p-button>
                <p-button icon="pi pi-trash" (click)="cancelContract()" label="Hủy duyệt" styleClass=" p-button-sm mr-1">
                </p-button>
                <p-button icon="pi pi-times" (click)="displayApproveContract= !displayApproveContract" label="Hủy"
                    styleClass="p-button-secondary p-button-sm"></p-button>
            </ng-template>
        </p-dialog>

        <!-- <p-dialog header="Thông tin hồ sơ cá nhân" [(visible)]="displayCreateContract" [modal]="true" [draggable]="false"
            [resizable]="false" [style]="{width: '70vw'}" [autoZIndex]=true [draggable]="false" [resizable]="false">
            <div class="grid-default border" *ngIf="displayCreateContract">
                <app-list-grid-angular [domLayout]="'autoHeight'" [title]="'Chứng chỉ'"
                    [listsData]="listsDataRecord" (FnClick)="OnClick($event)" [columnDefs]="columnDefsRecord"></app-list-grid-angular>
            </div>
            <ng-template pTemplate="footer">
                <p-button icon="pi pi-check" (click)="saveCreateContract()" label="Xác nhận" styleClass=" p-button-sm mr-1">
                </p-button>
                <p-button icon="pi pi-times" (click)="displayCreateContract= !displayCreateContract" label="Hủy"
                    styleClass="p-button-secondary p-button-sm"></p-button>
            </ng-template>
        </p-dialog> -->

        <p-dialog styleClass="popup-btngroup-edit-detail" header="{{modelContractInfo.contractId === null ? ' Tạo hợp đồng': 'Thông tin chi tiết hợp đồng'}}" [(visible)]="hienthihopdong" [modal]="true"  [draggable]="false" [resizable]="false"
            [style]="{width: '80vw'}" [autoZIndex]=true [draggable]="false" [resizable]="false">
            <app-create-contract-info *ngIf="hienthihopdong" [modelContractInfo]="modelContractInfo"
                (callback)="emitContract($event)" (back)="hienthihopdong = !hienthihopdong"></app-create-contract-info>
        </p-dialog>

        <p-dialog styleClass="popup-btngroup-edit-detail" header="{{modelAttach.metaId > 0 ? 'Xem chi tiết file đính kèm' : 'Thêm file đính kèm'}}" [(visible)]="displayAttach" [modal]="true" [draggable]="false" [resizable]="false"
            [style]="{width: '600px'}" [autoZIndex]=true [draggable]="false" [resizable]="false">

            <app-emp-attach-file *ngIf="displayAttach" [modelAttach]="modelAttach" (callback)="emitAttach($event)"
                (back)="displayAttach = !displayAttach"></app-emp-attach-file>
        </p-dialog>

        <p-dialog [(visible)]="displayuploadcontract" [autoZIndex]="true" [modal]="true"  appendTo="body"
            [style]="{width: '800px', height: 'auto'}">
            <p-header>
                Tải lên hợp đồng [{{record?.meta_title}}]
            </p-header>
            <app-upload-file [multiple]="" (callback)="handleUpload($event)" *ngIf="displayuploadcontract"></app-upload-file>
        </p-dialog>

        <p-dialog styleClass="xemthongtin-giayto-for-btn" [(visible)]="isShowCustIndiCreate" (onHide)="onHideCreate()" [draggable]="false"  [resizable]="false" [autoZIndex]="true" [modal]="true" [style]="{width: '1000px', height: 'auto'}">
            <p-header>
            Xem thông tin giấy tờ
            </p-header>
            <app-detect-card *ngIf="isShowCustIndiCreate" [isShowRegister]="isShowRegister" (reset)="isShowRegister =!isShowRegister"  (callback)="confirmCheckCard($event)" [thongtinchitietthe]="thongtinchitietthe"></app-detect-card>
            <app-card-info *ngIf="isShowRegister" [thongtinchitietthe]="thongtinchitietthe"  (back)="onReloadCard()"></app-card-info>
        </p-dialog>

        <p-dialog [(visible)]="isShowAddress" [draggable]="false" [resizable]="false" [autoZIndex]="true" [modal]="true" [style]="{width: '1200px', height: 'auto'}">
            <p-header>
                {{thongtinlienhe.cont_id ? 'Xem chi tiết liên hệ' :  'Thêm mới người liên hệ'}}
            </p-header>
            <app-add-address-contact *ngIf="isShowAddress" [thongtinlienhe]="thongtinlienhe" (back)="reloaddanhsachlienhe()"></app-add-address-contact>
        </p-dialog>

        <p-dialog styleClass="popup-btngroup-edit-detail" [ngClass]="hideTitlePopup ? 'hide-title-popup' : ''" [(visible)]="displayFormEditDetail" [draggable]="false"  [resizable]="false" [autoZIndex]="true" [modal]="true" [style]="{width: '600px', height: 'auto'}">
            <p-header>
                {{titleType0}}
            </p-header>
            <app-edit-detail [optionsButtonsEdit]="optionsButtonsPopup" *ngIf="listViewsDependent.length> 0 && detailDependentInfo" [detailInfo]="detailInfo"
                [detail]="detailDependentInfo" [manhinh]="'Edit'" [thongtinnhanvienNew]="true"
                [dataView]="listViewsDependent" (callback)="setEmpDependen($event)"
                (callbackcancel)="cancelDependentInfo($event)"></app-edit-detail>
        </p-dialog>


        <p-dialog [(visible)]="isShowEditUserLogin" styleClass="xemthongtin-giayto-for-btn" [draggable]="false" [resizable]="false" [autoZIndex]="true" [modal]="true" [style]="{width: '1200px', height: 'auto'}">
            <p-header>
                Chi tiết tài khoản
            </p-header>
            <app-user-detail [keyName]="keyName" *ngIf="isShowEditUserLogin" [isDialog]="true" (back)="saveUserLoginEdit()"></app-user-detail>
        </p-dialog>

        <p-dialog [(visible)]="displayNguoiDung" [draggable]="false"  [resizable]="false" [autoZIndex]="true" [modal]="true" [style]="{width: '1200px', height: 'auto'}">
            <p-header>
            {{detailInfo?.account_no ? 'Chỉnh sửa' : 'Thêm'}} tài khoản người dùng [{{detailInfo?.fullName}}]
            </p-header>
        <app-detail-account *ngIf="displayNguoiDung" [detailAccount]="detailAccount" [isModal]="false" (back)="displayNguoiDung = !displayNguoiDung"></app-detail-account>
        </p-dialog>

        <p-dialog [(visible)]="isShowAddUserLogin" [draggable]="false" [resizable]="false" [autoZIndex]="true" [modal]="true" [style]="{width: '600px', height: 'auto'}">
            <p-header>
            {{keyName === '' ? 'Thêm mới' : 'Chỉnh sửa'}}  tài khoản login
            </p-header>
            <div class="field-group text label-8" [ngClass]=" keyName ? 'valid' : 'invalid' ">
                <label for="">Tên tài khoản</label>
                <input class="form-control" type="text"
                placeholder="Nhập tên user" id="filter" name="filter" [(ngModel)]="keyName" />
            </div>
            <div class="row mt-1">
            <div class="col-md-6"></div>
            <div class="col-md-6 text-right">
                <p-button styleClass="p-button-sm" icon="pi pi-check" label="Lưu lại" (click)="saveUserLogin()"></p-button>
            </div>
            </div>
        </p-dialog>   

        <p-dialog [(visible)]="hienThifileDinhKem" [modal]="true" [style]="{width: '800px', height: 'auto'}">
            <p-header>
            File đính kèm
            </p-header>
            <div class="view-file text-center">
                <img style="max-width: 100%; max-height: 600px;" *ngIf="dataFileDinhKem.meta_file_type === 'image/jpeg'" src="{{dataFileDinhKem.meta_file_url}}">
            </div>
        </p-dialog>   
    </div>
</section>
</div>